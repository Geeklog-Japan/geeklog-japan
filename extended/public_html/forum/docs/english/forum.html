<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
  <title>Geeklog Forum Plugin Documentation</title>
  <link rel="stylesheet" type="text/css" href="./../../../docs/docstyle.css" title="Dev Stylesheet">
</head>

<body>
<h1>Geeklog Forum Plugin Documentation</h1>

<p>The following information explains the configuration options, autotags and templates of the Geeklog Forum plugin. For install or upgrade instructions please read the readme.html file found in the 
/path/to/geeklog/plugins/forum/ directory.</p>

<h2><a name="config.php">Configuration</a></h2>

<p>The configuration of the Forum plugin can be changed from the Configuration admin panel:</p>

<h3><a name="config_main">General Forum Settings</a></h3>

<table class="config">
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr>
  <td><a name="desc_registration_required">registration_required</a></td>
  <td>0</td>
  <td>When set to 1, only registered users can access the forum section.</td>
</tr>
<tr class="r2">
  <td><a name="desc_registered_to_post">registered_to_post</a></td>
  <td>0</td>
  <td>When set to 1, only registered users can create the forum posts.</td>
</tr>
<tr>
  <td><a name="desc_allow_notification">allow_notification</a></td>
  <td>1</td>
  <td>Allow (1) or disallow (0) subscribing to post notifications. Registered users can get email notifying them of posts to forums.</td>
</tr>
<tr class="r2">
  <td><a name="desc_show_topicreview">show_topicreview</a></td>
  <td>1</td>
  <td>When set to 1, show topic review (iframe) at bottom when replying to a topic.</td>
</tr>
<tr>
  <td><a name="desc_allow_user_dateformat">allow_user_dateformat</a></td>
  <td>0</td>
  <td>Allow (1) or disallow (0) users to define the date/time format.</td>
</tr>
<tr class="r2">
  <td><a name="desc_use_pm_plugin">use_pm_plugin</a></td>
  <td>0</td>
  <td>When set to 1, enable the "Private Message" plugin.</td>
</tr>
<tr>
  <td><a name="desc_show_topics_perpage">show_topics_perpage</a></td>
  <td>10</td>
  <td>Number of topics to show per page when viewing the forum index.</td>
</tr>
<tr class="r2">
  <td><a name="desc_show_posts_perpage">show_posts_perpage</a></td>
  <td>10</td>
  <td>Number of posts to show per page.</td>
</tr>
<tr>
  <td><a name="desc_show_messages_perpage">show_messages_perpage</a></td>
  <td>20</td>
  <td>Number of message lines to show per page when viewing messages admin screen.</td>
</tr>
<tr class="r2">
  <td><a name="desc_show_searches_perpage">show_searches_perpage</a></td>
  <td>20</td>
  <td>Number of records to show per page when viewing search results.</td>
</tr>
<tr>
  <td><a name="desc_showblocks">showblocks</a></td>
  <td>leftblocks</td>
  <td>Which block columns to use with the forum.</td>
</tr>
<tr class="r2">
  <td><a name="desc_usermenu">usermenu</a></td>
  <td>blockmenu</td>
  <td>The type of user menu to display. Use a Geeklog block or the navigation bar (supported by the NavMan Plugin).</td>
</tr>
</table>

<h3><a name="config_topicposting">Topic Posting</a></h3>

<table class="config">
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr>
  <td><a name="desc_show_subject_length">show_subject_length</a></td>
  <td>75</td>
  <td>Maximum length in characters for the topic subject. Specifying 0 means the entire subject will be showen.</td>
</tr>
<tr class="r2">
  <td><a name="desc_min_username_length">min_username_length</a></td>
  <td>2</td>
  <td>Minimum length in characters required for members name or anonymous name.</td>
</tr>
<tr>
  <td><a name="desc_min_subject_length">min_subject_length</a></td>
  <td>2</td>
  <td>Minimum length in characters required for the topic subject to post.</td>
</tr>
<tr class="r2">
  <td><a name="desc_min_comment_length">min_comment_length</a></td>
  <td>5</td>
  <td>Minimum length in characters required for the contents to post.</td>
</tr>
<tr>
  <td><a name="desc_views_tobe_popular">views_tobe_popular</a></td>
  <td>20</td>
  <td>Number of views required for topic to have popular rating.</td>
</tr>
<tr class="r2">
  <td><a name="desc_post_speedlimit">post_speedlimit</a></td>
  <td>60</td>
  <td>Minimum delay between posts in seconds. This helps prevent Denial of Service (DoS) attacks.</td>
</tr>
<tr>
  <td><a name="desc_allowed_editwindow">allowed_editwindow</a></td>
  <td>60</td>
  <td>Allowed time in seconds to allow users to edit their posts.</td>
</tr>
<tr class="r2">
  <td><a name="desc_allow_html">allow_html</a></td>
  <td>1</td>
  <td>When set to 1, enable "HTML" mode to be used in posts. When set to 0, users will only be able to post in "Text" mode but still use bbcode.</td>
</tr>
<tr>
  <td><a name="desc_post_htmlmode">post_htmlmode</a></td>
  <td>1</td>
  <td>Sets the default post mode to "HTML" (1) or "Text" (0).</td>
</tr>
<tr class="r2">
  <td><a name="desc_convert_break">convert_break</a></td>
  <td>0</td>
  <td>When set to 1, convert new lines to HTML &lt;BR&gt; tags when viewing posts.</td>
</tr>
<tr>
  <td><a name="desc_use_censor">use_censor</a></td>
  <td>1</td>
  <td>When set to 1, enable Geeklog's censoring feature of bad words.</td>
</tr>
<tr class="r2">
  <td><a name="desc_use_glfilter">use_glfilter</a></td>
  <td>1</td>
  <td>When set to 1, enable Geeklog's filtering feature of HTML.</td>
</tr>
<tr>
  <td><a name="desc_use_geshi">use_geshi</a></td>
  <td>1</td>
  <td>When set to 1, enable the GeSHi (Generic Syntax Highlighter).</td>
</tr>
<tr class="r2">
  <td><a name="desc_use_spamx_filter">use_spamx_filter</a></td>
  <td>1</td>
  <td>When set to 1, enable the Spam-X Plugin to filter out possible spam on all posts before saving.</td>
</tr>
<tr>
  <td><a name="desc_show_moods">show_moods</a></td>
  <td>1</td>
  <td>When set to 1, enable Moods to be selected per post.</td>
</tr>
<tr class="r2">
  <td><a name="desc_allow_smilies">allow_smilies</a></td>
  <td>1</td>
  <td>When set to 1, enable Smilies to be used.</td>
</tr>
<tr>
  <td><a name="desc_use_smilies_plugin">use_smilies_plugin</a></td>
  <td>0</td>
  <td>When set to 1, enable the "Smilies" plugin for handling Smilies.</td>
</tr>
<tr class="r2">
  <td><a name="desc_avatar_width">avatar_width</a></td>
  <td>0</td>
  <td>Able to set the width of the member avatar in pixels. Default is to use the member's uploaded image and size Geeklog site has for creating this thumbnail image. If a value is defined for this setting, the forum will resize the displayed image to this defined width.</td>
</tr>
</table>

<h3><a name="config_centerblock">Centerblock</a></h3>

<table class="config">
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr>
  <td><a name="desc_show_centerblock">show_centerblock</a></td>
  <td>1</td>
  <td>When set to 1, the centerblock for the forum posts will be enabled.</td>
</tr>
<tr class="r2">
  <td><a name="desc_centerblock_homepage">centerblock_homepage</a></td>
  <td>0</td>
  <td>When set to 1, the centerblock for the forum posts will be enabled for the homepage only.</td>
</tr>
<tr>
  <td><a name="desc_centerblock_numposts">centerblock_numposts</a></td>
  <td>5</td>
  <td>The number of posts that will display in the forum centerblock.</td>
</tr>
<tr class="r2">
  <td><a name="desc_cb_subject_size">cb_subject_size</a></td>
  <td>40</td>
  <td>The number of characters allowed in displayed subject of the forum centerblock. Specifying 0 means the entire subject will be showen.</td>
</tr>
<tr>
  <td><a name="desc_centerblock_where">centerblock_where</a></td>
  <td>2</td>
  <td>The placement of the forum centerblock on the page</td>
</tr>
</table>

<h3><a name="config_sideblock">Lates Posts Block (Sideblock)</a></h3>

<table class="config">
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr>
  <td><a name="desc_sideblock_numposts">sideblock_numposts</a></td>
  <td>5</td>
  <td>The number of posts to show in latestposts block.</td>
</tr>
<tr class="r2">
  <td><a name="desc_sb_subject_size">sb_subject_size</a></td>
  <td>20</td>
  <td>The number of characters allowed in displayed subject.</td>
</tr>
<tr>
  <td><a name="desc_sb_latestpostonly">sb_latestpostonly</a></td>
  <td>0</td>
  <td>When set to 1, the block will only show the latest post per topic</td>
</tr>
<tr>
  <td valign="top"><a name="desc_sideblock_enable">sideblock_enable</a></td>
  <td valign="top">true</td>
  <td valign="top">Enable block.</td></tr>
<tr class="r2">
  <td valign="top"><a name="desc_sideblock_isleft">sideblock_isleft</a></td>
  <td valign="top">0</td>
  <td valign="top">Whether to display the block on the left (when set to 1)
    or right (when set to 0).</td></tr>
<tr>
  <td valign="top"><a name="desc_sideblock_order">sideblock_order</a></td>
  <td valign="top">100</td>
  <td valign="top">The order the block appears in the column.</td></tr>
<tr>
  <td valign="top"><a name="desc_sideblock_topic_option">sideblock_topic_option</a></td>
  <td valign="top">'all'</td>
  <td valign="top">Set to 'All' for block to appear on all pages. Set to 'Homepage Only' for block to appear on just the homepage. Set to 'Selected Topics' for block to appear only in Topics selected in the Topic setting.</td></tr>
<tr>
  <td valign="top"><a name="desc_sideblock_topic">sideblock_topic</a></td>
  <td valign="top"></td>
  <td valign="top">The topics the block will appear for if the Topic Options is set to 'Select Topics'.</td></tr>
<tr>
  <td valign="top"><a name="desc_sideblock_group_id">sideblock_group_id</a></td>
  <td valign="top">Forum Admin</td>
  <td valign="top">The group used by permissions.</td></tr>
</table>

<h3><a name="config_rank">Rank</a></h3>

<table class="config">
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr>
  <td><a name="desc_level1">level1</a></td>
  <td>1</td>
  <td>The number of posts required to receive a Rank of 1.</td>
</tr>
<tr class="r2">
  <td><a name="desc_level2">level2</a></td>
  <td>15</td>
  <td>The number of posts required to receive a Rank of 2.</td>
</tr>
<tr>
  <td><a name="desc_level3">level3</a></td>
  <td>35</td>
  <td>The number of posts required to receive a Rank of 3.</td>
</tr>
<tr class="r2">
  <td><a name="desc_level4">level4</a></td>
  <td>70</td>
  <td>The number of posts required to receive a Rank of 4.</td>
</tr>
<tr>
  <td><a name="desc_level5">level5</a></td>
  <td>120</td>
  <td>The number of posts required to receive a Rank of 5.</td>
</tr>
<tr class="r2">
  <td><a name="desc_level1name">level1name</a></td>
  <td>Newbie</td>
  <td>The name of Rank 1.</td>
</tr>
<tr>
  <td><a name="desc_level2name">level2name</a></td>
  <td>Junior</td>
  <td>The name of Rank 2.</td>
</tr>
<tr class="r2">
  <td><a name="desc_level3name">level3name</a></td>
  <td>Chatty</td>
  <td>The name of Rank 3.</td>
</tr>
<tr>
  <td><a name="desc_level4name">level4name</a></td>
  <td>Regular Member</td>
  <td>The name of Rank 4.</td>
</tr>
<tr class="r2">
  <td><a name="desc_level5name">level5name</a></td>
  <td>Active Member</td>
  <td>The name of Rank 5.</td>
</tr>
</table>

<h3><a name="menublock">Menu Block</a></h3>

<table>
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr class="r2">
  <td valign="top"><a name="desc_menublock_isleft">menublock_isleft</a></td>
  <td valign="top">0</td>
  <td valign="top">Whether to display the block on the left (when set to 1)
    or right (when set to 0).</td></tr>
<tr>
  <td valign="top"><a name="desc_menublock_order">menublock_order</a></td>
  <td valign="top">0</td>
  <td valign="top">The order the block appears in the column.</td></tr>
</table>

<h2><a name="config.php">Config.php Settings</a></h2>

<p>Most of the common forum settings are available in the Geeklog Configuration but there are additional settings in the plugins config.php file. To change these settings you will have to open the 
forum config.php file (found in /path/to/geeklog/plugins/forum/) in your favorite text editor and update the appropriate line. We hope to move most of these eventually to the Geeklog Configuration.</p>

<h3><a name="config_rank">Config.php</a></h3>

<table class="config">
<tr><th style="width:25%">Variable</th>
    <th style="width:25%">Default Value</th>
    <th style="width:50%">Description</th>
</tr>
<tr>
  <td><a name="desc_pre2.5_mode">pre2.5_mode</a></td>
  <td>true</td>
  <td>Set to <strong>true</strong> only for sites that have updated from version 2.3.x or 2.5. If this is a clean install set to <strong>false</strong> and the forum will skip a few extra tests that are done while displaying a topic.</td>
</tr>
<tr class="r2">
  <td><a name="desc_silent_edit_default">silent_edit_default</a></td>
  <td>true</td>
  <td>When editing a post, you have a checkbox by the Submit button. If the silent option is not checked, the posted date will be updated and notifications sent out. If checked the Edit/Save is done siliently. This config option sets the default - set to <strong>true</strong> to have this checked by default.</td>
</tr>
<tr>
  <td><a name="desc_allow_img_bbcode">allow_img_bbcode</a></td>
  <td>true</td>
  <td>The BBCode tag [img] is enabled by default - set this to <strong>false</strong> to disable it.</td>
</tr>
<tr class="r2">
  <td><a name="desc_show_moderators">show_moderators</a></td>
  <td>false</td>
  <td>Disabled by default for performance gains. Enable if you need to show moderators on the main forum index page - set this to <strong>true</strong> to display moderators.</td>
</tr>
<tr>
  <td><a name="desc_autoimagetype">autoimagetype</a></td>
  <td>true</td>
  <td>The forum uses a number of icons and you may have a need to use a mixture of image types. Setting this setting to <strong>true</strong> will invoke a function that will first check for an image of the type set in your themes function.php $_IMAGE_TYPE. If the icon of that image type is not found, then it will use an image of type specified by the $CONF_FORUM['image_type_override'] setting. Set $CONF_FORUM['autoimagetype'] to <strong>false</strong> to disable this feature and only icons of type set by the themes $_IMAGE_TYPE setting will be used.</td>
</tr>
<tr class="r2">
  <td><a name="desc_image_type_override">image_type_override</a></td>
  <td>gif</td>
  <td>If the setting above is enabled and the default image type for an icon is not found - you can specify an alternative image type to use in this setting. Example 'gif' or 'jpg' are valid.</td>
</tr>
<tr>
  <td><a name="desc_default_Datetime_format">default_Datetime_format</a></td>
  <td>$_CONF['shortdate']." ".$_CONF['timeonly']</td>
  <td>Default date/time format to use if Forum setting for allow user-dateformat is disabled. Refer to the online <a href="http://ca3.php.net/manual/en/function.strftime.php">php manual</a> for more info on the time format string options.</td>
</tr>
<tr class="r2">
  <td><a name="desc_default_Topic_Datetime_format">default_Topic_Datetime_format</a></td>
  <td>$_CONF['shortdate']." ".$_CONF['timeonly']</td>
  <td>Date format that is shown at the top of of the topic post used if Forum setting for allow user-dateformat is disabled. Refer to the online <a href="http://ca3.php.net/manual/en/function.strftime.php">php manual</a> for more info on the time format string options.</td>
</tr>
<tr>
  <td><a name="desc_contentinfo_numchars">contentinfo_numchars</a></td>
  <td>256</td>
  <td>Number of characters of the topic contents when hovering over the topic post subject link.</td>
</tr>
<tr class="r2">
  <td><a name="desc_linkinfo_width">linkinfo_width</a></td>
  <td>70</td>
  <td>Width of pop-up info window that is displayed when hovering over topic posts. Also refer to the CSS declaration <strong>tooltip</strong></td>
</tr>
<tr>
  <td><a name="desc_quoteformat">quoteformat</a></td>
  <td>[QUOTE][u]Quote by: %s[/u][p]%s[/p][/QUOTE]</td>
  <td>Format style that will be used when using the quote feature. Also refer to the CSS decalaration <strong>quotemain</strong></td>
</tr>
<tr class="r2">
  <td><a name="desc_show_popular_perpage">show_popular_perpage</a></td>
  <td>20</td>
  <td>Set the default number of records to show in the 'Popular Topics' report</td>
</tr>
<tr>
  <td><a name="desc_show_last_post_count">show_last_post_count</a></td>
  <td>20</td>
  <td>Set the default number of records to show in the Members most recent forum posts report.</td>
</tr>
</table>


<h2><a name="templates">Template Files</a></h2>

<p>To update the layout of your Forum section, you can change the template files. Please note that they are now located in the plugin's directory under public_html, i.e. in</p>

<p style="margin-left:4em;"><tt>/path/to/geeklog/public_html/forum/layout/</tt></p>

<p>The template files are organized by folders:</p>
<ul>
<li>Main templates are in the top level layout folder</li>
<li>Templates for the centerblock and sideblock are located in the <span style="font-style: italic">blocks </span> subfolder</li>
<li>The forum footer related templates are located in the <span style="font-style: italic">footer</span> subfolder</li>
<li>Templates for most of the links like [new topic], [reply], [profile], [email] etc are themed using the templates under the <span style="font-style: italic">links</span> subfolder. It's possible to change these links to use images, CSS like buttons etc.</li>
<li>Templates for pages that show a report if newposts, members, subscriptions  etc are located in the <span style="font-style: italic">reports</span> folder</li>
</ul>

<h2><a name="autotags">Autotags</a></h2>

<p>The Forum Plugin provides one <a href="http://www.geeklog.net/article.php/autolinks" title="geeklog.net: About Autolinks and Autotags">autotag</a>,
<code>[forum:]</code>. You can use this autotag to display a link to a forum topic using the text 'here' as the title. 
An alternate title may be specified but is not required.</p>

<p>For example, the following autotags will translate to:</p>
<ul>
<li><code>[forum:1234]</code> will be translated to: <code>&lt;a href="http://www.yoursite.com/forum/viewtopic.php?showtopic=1234"&gt;here&lt;/a&gt;</code></li>
<li><code>[forum:1234 click to visit topic]</code> will be translated to: <code>&lt;a href="http://www.yoursite.com/forum/viewtopic.php?showtopic=1234"&gt;click to visit topic&lt;/a&gt;</code></li>
</ul>


</body>
</html>
